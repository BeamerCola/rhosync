--- &id001 !ruby/object:Source 
attributes: 
  name: BasecampProjects
  refreshtime: 2008-12-08 05:37:18
  prolog: ""
  updated_at: 2008-12-08 06:31:16.359954 Z
  deletecall: ""
  createcall: ""
  type: 
  url: http://rhomobile.basecamphq.com
  sync: ""
  method: 
  id: "6"
  updatecall: ""
  call: |-
    uri = URI.parse(@source.url+"/projects.xml")
    req = Net::HTTP::Get.new(uri.path, 'Accept' => 'application/xml')
    req.basic_auth @source.login, @source.password
    response = Net::HTTP.start(uri.host,uri.port) do |http|
      http.request(req)
    end
    xml_data = XmlSimple.xml_in(response.body)
    xml_data["project"].each do |project|
      id = project["id"][0]["content"]
    puts id
      o=ObjectValue.new
      o.source_id=@source.id
      o.object=id
      o.attrib="name"
      o.value= project["name"]
      o.update_type='query'
      o.save
      o=ObjectValue.new
      o.source_id=@source.id
      o.object=id
      o.attrib="status"
      o.value= project["status"][0]
      o.update_type='query'
      o.save
      o=ObjectValue.new
      o.source_id=@source.id
      o.object=id
      o.attrib="company_id"
      o.value= project["company"][0]["id"][0]["content"]
      o.update_type='query'
      o.save
      o=ObjectValue.new
      o.source_id=@source.id
      o.object=id
      o.attrib="company_name"
      o.value= project["company"][0]["name"]
      o.update_type='query'
      o.save      
    end
  password: 1ada27d82ec37a1229db
  login: www.vidalgraupera.com
  epilog: ""
  created_at: 2008-12-07 21:56:10
attributes_cache: {}

changed_attributes: {}

errors: !ruby/object:ActiveRecord::Errors 
  base: *id001
  errors: {}

new_record_before_save: 
